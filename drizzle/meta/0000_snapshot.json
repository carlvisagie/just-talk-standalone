{
  "id": "188721f0-c4dd-42a6-8b30-629a725197ad",
  "prevId": "00000000-0000-0000-0000-000000000000",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.behavioral_pattern": {
      "name": "behavioral_pattern",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar(255)",
          "primaryKey": true,
          "notNull": true
        },
        "client_profile_id": {
          "name": "client_profile_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "pattern_type": {
          "name": "pattern_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "pattern_data": {
          "name": "pattern_data",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "trend": {
          "name": "trend",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "significance": {
          "name": "significance",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "ai_analysis": {
          "name": "ai_analysis",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "behavioral_pattern_client_profile_id_client_profile_id_fk": {
          "name": "behavioral_pattern_client_profile_id_client_profile_id_fk",
          "tableFrom": "behavioral_pattern",
          "tableTo": "client_profile",
          "columnsFrom": [
            "client_profile_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.client_profile": {
      "name": "client_profile",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar(255)",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "preferred_name": {
          "name": "preferred_name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "pronouns": {
          "name": "pronouns",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "age": {
          "name": "age",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "location": {
          "name": "location",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "communication_style": {
          "name": "communication_style",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "preferred_channel": {
          "name": "preferred_channel",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "best_time_to_reach": {
          "name": "best_time_to_reach",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "common_triggers": {
          "name": "common_triggers",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "coping_strategies": {
          "name": "coping_strategies",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "emotional_patterns": {
          "name": "emotional_patterns",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "current_goals": {
          "name": "current_goals",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "past_wins": {
          "name": "past_wins",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "ongoing_challenges": {
          "name": "ongoing_challenges",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "crisis_risk_level": {
          "name": "crisis_risk_level",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false,
          "default": "'none'"
        },
        "last_crisis_date": {
          "name": "last_crisis_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "crisis_notes": {
          "name": "crisis_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "first_contact_date": {
          "name": "first_contact_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "last_contact_date": {
          "name": "last_contact_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "total_conversations": {
          "name": "total_conversations",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "total_messages": {
          "name": "total_messages",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "total_phone_calls": {
          "name": "total_phone_calls",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "total_sms": {
          "name": "total_sms",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "ai_summary": {
          "name": "ai_summary",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "client_profile_user_id_user_id_fk": {
          "name": "client_profile_user_id_user_id_fk",
          "tableFrom": "client_profile",
          "tableTo": "user",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.conversation": {
      "name": "conversation",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar(255)",
          "primaryKey": true,
          "notNull": true
        },
        "client_profile_id": {
          "name": "client_profile_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "user_id": {
          "name": "user_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "channel": {
          "name": "channel",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true,
          "default": "'web'"
        },
        "mood": {
          "name": "mood",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "topic": {
          "name": "topic",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "sentiment": {
          "name": "sentiment",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "crisis_detected": {
          "name": "crisis_detected",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "crisis_level": {
          "name": "crisis_level",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false,
          "default": "'none'"
        },
        "message_count": {
          "name": "message_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "duration": {
          "name": "duration",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "ended_at": {
          "name": "ended_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "conversation_client_profile_id_client_profile_id_fk": {
          "name": "conversation_client_profile_id_client_profile_id_fk",
          "tableFrom": "conversation",
          "tableTo": "client_profile",
          "columnsFrom": [
            "client_profile_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "conversation_user_id_user_id_fk": {
          "name": "conversation_user_id_user_id_fk",
          "tableFrom": "conversation",
          "tableTo": "user",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.crisis_log": {
      "name": "crisis_log",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar(255)",
          "primaryKey": true,
          "notNull": true
        },
        "client_profile_id": {
          "name": "client_profile_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "conversation_id": {
          "name": "conversation_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "crisis_level": {
          "name": "crisis_level",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "indicators": {
          "name": "indicators",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "transcript": {
          "name": "transcript",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "escalated": {
          "name": "escalated",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "escalated_to": {
          "name": "escalated_to",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "escalation_time": {
          "name": "escalation_time",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "resolved": {
          "name": "resolved",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "resolution": {
          "name": "resolution",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "resolved_at": {
          "name": "resolved_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "crisis_log_client_profile_id_client_profile_id_fk": {
          "name": "crisis_log_client_profile_id_client_profile_id_fk",
          "tableFrom": "crisis_log",
          "tableTo": "client_profile",
          "columnsFrom": [
            "client_profile_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "crisis_log_conversation_id_conversation_id_fk": {
          "name": "crisis_log_conversation_id_conversation_id_fk",
          "tableFrom": "crisis_log",
          "tableTo": "conversation",
          "columnsFrom": [
            "conversation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.interaction_log": {
      "name": "interaction_log",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar(255)",
          "primaryKey": true,
          "notNull": true
        },
        "client_profile_id": {
          "name": "client_profile_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "interaction_type": {
          "name": "interaction_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "target": {
          "name": "target",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "duration": {
          "name": "duration",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "timestamp": {
          "name": "timestamp",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "interaction_log_client_profile_id_client_profile_id_fk": {
          "name": "interaction_log_client_profile_id_client_profile_id_fk",
          "tableFrom": "interaction_log",
          "tableTo": "client_profile",
          "columnsFrom": [
            "client_profile_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.message": {
      "name": "message",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar(255)",
          "primaryKey": true,
          "notNull": true
        },
        "conversation_id": {
          "name": "conversation_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "mood": {
          "name": "mood",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "sentiment": {
          "name": "sentiment",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "crisis_keywords": {
          "name": "crisis_keywords",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "audio_url": {
          "name": "audio_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "transcription_confidence": {
          "name": "transcription_confidence",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "message_conversation_id_conversation_id_fk": {
          "name": "message_conversation_id_conversation_id_fk",
          "tableFrom": "message",
          "tableTo": "conversation",
          "columnsFrom": [
            "conversation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.subscription": {
      "name": "subscription",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar(255)",
          "primaryKey": true,
          "notNull": true
        },
        "client_profile_id": {
          "name": "client_profile_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "stripe_subscription_id": {
          "name": "stripe_subscription_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "stripe_customer_id": {
          "name": "stripe_customer_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "stripe_price_id": {
          "name": "stripe_price_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "tier": {
          "name": "tier",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "current_period_start": {
          "name": "current_period_start",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "current_period_end": {
          "name": "current_period_end",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "cancel_at_period_end": {
          "name": "cancel_at_period_end",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "subscription_client_profile_id_client_profile_id_fk": {
          "name": "subscription_client_profile_id_client_profile_id_fk",
          "tableFrom": "subscription",
          "tableTo": "client_profile",
          "columnsFrom": [
            "client_profile_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "subscription_stripe_subscription_id_unique": {
          "name": "subscription_stripe_subscription_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "stripe_subscription_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.user": {
      "name": "user",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar(255)",
          "primaryKey": true,
          "notNull": true
        },
        "open_id": {
          "name": "open_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "avatar": {
          "name": "avatar",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "role": {
          "name": "role",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true,
          "default": "'user'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "user_open_id_unique": {
          "name": "user_open_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "open_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.voice_signature": {
      "name": "voice_signature",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar(255)",
          "primaryKey": true,
          "notNull": true
        },
        "client_profile_id": {
          "name": "client_profile_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "voiceprint": {
          "name": "voiceprint",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "confidence_threshold": {
          "name": "confidence_threshold",
          "type": "real",
          "primaryKey": false,
          "notNull": true,
          "default": 0.8
        },
        "last_recognized": {
          "name": "last_recognized",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "recognition_count": {
          "name": "recognition_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "voice_signature_client_profile_id_client_profile_id_fk": {
          "name": "voice_signature_client_profile_id_client_profile_id_fk",
          "tableFrom": "voice_signature",
          "tableTo": "client_profile",
          "columnsFrom": [
            "client_profile_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {},
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}